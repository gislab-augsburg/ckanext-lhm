{% import 'macros/form.html' as form %}

{%- if data.state != "draft" -%}


  {%- set options=[] -%}
  {%- set form_restrict_choices_to=field.get('form_restrict_choices_to') -%}


  {%- for c in h.scheming_field_choices(field) -%}
    {%- if not form_restrict_choices_to or c.value in form_restrict_choices_to -%}
      {%- do options.append({
        'value': c.value|string,
        'text': h.scheming_language_text(c.label) }) -%}
    {%- endif -%}
  {%- endfor -%}
  {%- if field.get('sorted_choices') -%}
    {%- set options = options|sort(case_sensitive=false, attribute='text') -%}
  {%- endif -%}
  {%- if data[field.field_name] -%}
    {%- set option_selected = data[field.field_name]|string -%}
  {%- else -%}
    {%- set option_selected = None -%}
  {%- endif -%}


  {% call form.select(
      field.field_name,
      id='field-' + field.field_name,
      label=h.scheming_language_text(field.label),
      options=options,
      selected=option_selected,
      error=errors[field.field_name],
      classes=field.classes if 'classes' in field else ['control-medium'],
      attrs=dict({"class": "form-control"}, **(field.get('form_attrs', {}))),
      is_required=h.scheming_field_required(field),
      is_info = field.is_info,
      info_text = field.info_text
      )
  %}
      {%- snippet 'scheming/form_snippets/help_text_lhm.html', field=field -%}
  {% endcall %}

{% else %}

<b>Status:</b>
<span class="fa fa-info-circle" style="font-size: 13pt;" data-toggle="tooltip" title="Der Datensatz wird zunächst als Entwurf gespeichert. Werden im nächsten Schritt Daten als Ressource hinzugefügt, ändert sich sein Status auf 'Aktiv'. Der Status kann durch Bearbeiten des Datensatzes jederzeit wieder geändert werden. Ein Datensatz mit dem Status 'Entwurf' wird nicht in der Datensatz-Übersicht und -Suche angezeigt. Er ist nur für den Ersteller des Datensatzes in dessen Profil sichtbar."></span>
<br />   Entwurf
<br />
<br />
  
{% endif %}